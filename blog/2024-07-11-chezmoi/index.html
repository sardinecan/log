<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../../sunset.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="../../_app/immutable/assets/0.DWVgpjB2.css" rel="stylesheet">
		<link rel="modulepreload" href="../../_app/immutable/entry/start.DyaZmTW7.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/entry.kosUDhtZ.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/scheduler.DaEglZbh.js">
		<link rel="modulepreload" href="../../_app/immutable/entry/app.ud2yafPf.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/preload-helper.C1FmrZbK.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.B_-7WD2a.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/0.7Be-4-1-.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/stores.CzNeTNJ7.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/4.BCJGrwJr.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/dynamic-import-helper.BheWnx7M.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/dates.D2-NGLRx.js"><!-- HEAD_svelte-1i32evn_START --><!-- HEAD_svelte-1i32evn_END -->
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">     <div class="content">  <nav class="svelte-epptjw"> <a href="/" class="svelte-epptjw" data-svelte-h="svelte-4ebbsj"><h1 class="svelte-epptjw">/log</h1></a> <ul class="svelte-epptjw"><li><a href="/blog" class="svelte-epptjw active" data-svelte-h="svelte-1jcr7w4">Blog</a></li> <li><a href="/reports" class="svelte-epptjw" data-svelte-h="svelte-12wekpw">Comptes rendus</a></li>  <li><a href="/notes" class="svelte-epptjw" data-svelte-h="svelte-eu7epz">Notes</a></li> <li><a href="/projets" class="svelte-epptjw" data-svelte-h="svelte-4lv15p">Projets</a></li>  <li><button class="switch svelte-epptjw" role="switch" aria-checked="true"></button></li></ul></nav>   <main>  <article><p class="date">11 juillet 2024</p> <h1 data-svelte-h="svelte-1dk04tp">Maîtriser ses fichiers <em>dotefiles</em></h1> <p data-svelte-h="svelte-1kqjh0c">Les <em>dotefiles</em>, vous savez, ces innombrables fichiers de configuration, que l’on met des semaines à rédiger afin d’obtenir le <em>setup</em> parfait ! Si vous voyez ce dont je parle, vous savez certainement que le partage, la sauvegarde ou la synchronisation de ces <em>dotefiles</em> représente un véritable challenge.</p> <p data-svelte-h="svelte-w3ggk5">À l’origine, et dans un système UNIX, ces <em>dotefiles</em> correspondent aux fichiers et dossiers cachés dont le nom commence par un point et qui servent aux paramétrages des programmes présents sur votre machine. Par extension, ce terme englobe aujourd’hui tous les fichiers de configuration. Ces fichiers, le plus souvent en constante évolution, représentent pour leurs auteurs un travail au long cours, ils sont le fruits de longues séances de recherche, d’essais et de débogage afin d’obtenir des outils aussi beaux qu’efficaces. Malheureusement, ils sont généralement éparpillés un peu partout dans le répertoire <code>$HOME</code>, et lorsque l’on souhaite les déployer sur une autre machine, il est préférable d’avoir un peu de temps devant soi. Certes, l’utilisation conjointe d’un repo Github (ou autre), contenant ces <em>dotefiles</em>, et de <a href="https://fr.wikipedia.org/wiki/Lien_symbolique" rel="nofollow">liens symboliques</a> permet d’alléger cette tâche ; mais cette solution reste imparfaite, notamment lorsque l’on travaille sur plusieurs machines qui ne disposent pas du même environnement, et oblige donc à des manipulations manuelles : par exemple, on ne souhaitera pas déployer les mêmes fichiers suivants que l’on soit sous Linux, MacOS ou Windows.</p> <p data-svelte-h="svelte-1df8ltv">Heureusement, des solutions existent pour manipuler ses <em>dotefiles</em>, et il y en a pour tous les besoins, des plus simples aux plus complexes : du simple gestionnaire de liens symboliques comme <a href="https://www.gnu.org/software/stow/" rel="nofollow">GNU Stow</a> aux solutions plus élaborées comme <a href="https://www.chezmoi.io/" rel="nofollow">Chezmoi</a>, que je souhaite vous présenter ici.</p> <h2 data-svelte-h="svelte-3m6tpq">Un gestionnaire de <em>dotefiles</em></h2> <p data-svelte-h="svelte-onjc1l">Les gestionnaires de <em>dotefiles</em> sont tous plus ou moins pensés autour du même mode de fonctionnement : les fichiers sont sauvegardés sur un repo Git selon des conventions de nommage permettant de se représenter leur emplacement, généralement à partir du <code>$HOME</code>. Le gestionnaire se charge ensuite du déploiement des <em>dotefiles</em> en générant soit des liens symboliques, soit des copies locales. Certains gestionnaires comme <em>Chezmoi</em> prennent en charge des <em>templates</em> permettant de personnaliser le déploiement des <em>dotefiles</em> au regard de certaines variables.</p> <h2 data-svelte-h="svelte-1iyor2c">Installation et initialisation</h2> <p data-svelte-h="svelte-1p3h3zh">Chezmoi est disponible avec la plupart des <a href="https://www.chezmoi.io/install/" rel="nofollow">gestionnaires de paquets</a> Linux, MacOS et Windows. Par exemple, pour l’installer avec <a href="https://brew.sh/" rel="nofollow">Homebrew</a>, il suffit de lancer la commande suivante :</p> <pre class="language-shell"><!-- HTML_TAG_START --><code class="language-shell">brew <span class="token function">install</span> chezmoi</code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-1a8roab">Vous ne trouvez votre gestionnaire de paquets favori ? de multiples solutions alternatives sont proposées dans la <a href="https://www.chezmoi.io/install/" rel="nofollow">documentation</a>.</p> <p data-svelte-h="svelte-o72wo5">Pour initialiser chezmoi sur votre machine, il suffit de lancer la commande <code>chezmoi init</code>, ce qui aura pour conséquence de créer un répertoire Git à l’emplacement <code>~/.local/share/chezmoi</code>. C’est dans ce dossier que seront stockés les fichiers sources. Comme vous pourrez le constater, chezmoi offre une expérience proche de ce que propose Git, et si vous êtes déjà familier ce dernier, vous ne devriez pas être perdu !</p> <h2 data-svelte-h="svelte-1m8djmk">Ajouter des <em>dotefiles</em></h2> <p data-svelte-h="svelte-1okg9qn">La commande <code>chezmoi add $FILE</code> permet d’ajouter un fichier — ou un dossier — aux dotefiles. Par exemple, ajoutons nos fichiers <code>.zshrc</code> et <code>.vimrc</code> :</p> <pre class="language-shell"><!-- HTML_TAG_START --><code class="language-shell">chezmoi <span class="token function">add</span> ~/.zshrc
chezmoi <span class="token function">add</span> ~/.vimrc</code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-l1ra0f">La commande <code>chezmoi cd</code> permet de se rendre dans le dossier <code>chezmoi</code> où nous pourrons ajouter les fichiers précédents au repo git.</p> <pre class="language-shell"><!-- HTML_TAG_START --><code class="language-shell">chezmoi <span class="token builtin class-name">cd</span>
<span class="token comment"># commandes git pour ajouter les fichiers au repo</span>
<span class="token function">git</span> status
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">"added first dotefiles"</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-uah4dn">Il est possible de configurer chezmoi afin d’<a href="https://www.chezmoi.io/user-guide/daily-operations/#automatically-commit-and-push-changes-to-your-repo" rel="nofollow">automatiser les <em>commit</em>/<em>push</em></a> si vous avez liéce repo local avec un repo en ligne. Il convient tout d’abord de créer le fichier de configuration <code>~/.config/chezmoi/chezmoi.toml</code> s’il n’existe pas déjà, puis d’y ajouter les instructions suivantes :</p> <pre class="language-toml"><!-- HTML_TAG_START --><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">git</span><span class="token punctuation">]</span>
    <span class="token key property">autoCommit</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
    <span class="token key property">autoPush</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></code><!-- HTML_TAG_END --></pre> <h2 data-svelte-h="svelte-hbni7w">Modifier et appliquer des modifications</h2> <h2 data-svelte-h="svelte-5sqr2j">Les templates</h2> <h2 data-svelte-h="svelte-j8kvfd">Ignorer des fichiers</h2> <h2 data-svelte-h="svelte-1rq131m">Déploiement sur une autre machine</h2></article></main>   <footer class="svelte-1capoi1" data-svelte-h="svelte-1h3xx8c"><nav><ul class="svelte-1capoi1"><li><a href="https://github.com/sardinecan/log" class="svelte-1capoi1">Github</a></li> </ul></nav></footer> </div> 
			
			<script>
				{
					__sveltekit_1f54hxt = {
						base: new URL("../..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					const data = [null,null];

					Promise.all([
						import("../../_app/immutable/entry/start.DyaZmTW7.js"),
						import("../../_app/immutable/entry/app.ud2yafPf.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 4],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
